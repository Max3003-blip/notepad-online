<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Online Notepad</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f8ff;
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 25px;
      background-color: #007bff;
      color: white;
      font-size: 14px;
      min-height: 40px;
      position: relative;
    }

    #quote {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #datetime {
      flex-shrink: 0;
      position: absolute;
      right: 25px;
    }

    .container {
      max-width: 90vw;
      margin: 20px auto;
      background: #ffffff;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      border: 3px solid #007bff;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
      font-size: 2rem;
    }

    textarea {
      width: 100%;
      height: 600px;
      padding: 20px;
      font-size: 18px;
      border: 2px solid #ccc;
      border-radius: 12px;
      resize: vertical;
      box-sizing: border-box;
      outline: none;
      transition: border 0.2s;
    }

    textarea:focus {
      border: 2px solid #007bff;
      background-color: #f9fcff;
    }

    #counter {
      text-align: center;
      margin-top: 15px;
      font-size: 14px;
      color: #555;
    }

    .buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 25px;
    }

    button {
      padding: 14px 28px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 10px;
      background-color: #007bff;
      color: white;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #0056b3;
    }

    .saved {
      text-align: center;
      font-size: 14px;
      color: gray;
      margin-top: 20px;
    }

    .saved-msg {
      text-align: center;
      color: green;
      font-size: 13px;
      display: none;
      margin-top: 5px;
      transition: opacity 0.3s;
    }

    /* Dark mode styles */
    body.dark {
      background: #1e1e1e;
      color: #ffffff;
    }

    body.dark .container {
      background: #2a2a2a;
      border-color: #00bfff;
    }

    body.dark textarea {
      background: #1e1e1e;
      color: #fff;
      border-color: #444;
    }

    body.dark textarea:focus {
      background: #2a2a2a;
      border-color: #00bfff;
    }

    body.dark .top-bar {
      background-color: #00bfff;
    }
  </style>
</head>
<body>

  <div class="top-bar">
    <div id="quote">Loading quote...</div>
    <div id="datetime">--:--</div>
  </div>

  <div style="text-align: right; margin: 10px 30px;">
    <label style="font-size: 14px;">
      <input type="checkbox" id="darkToggle" />
      Dark Mode
    </label>
  </div>

  <div class="container">
    <h1>Online Notepad</h1>
    <textarea id="notepad" placeholder="Start typing..."></textarea>
    <p id="counter">Words: 0 | Characters: 0</p>
    <div class="buttons">
      <button onclick="copyText()">Copy</button>
      <button onclick="clearText()">Clear</button>
      <button onclick="downloadText()">Download</button>
    </div>
    <p class="saved">Autosaved to your browser</p>
    <p id="autosaveStatus" class="saved-msg">Saved!</p>
  </div>

  <script>
    const notepad = document.getElementById("notepad");
    const counter = document.getElementById("counter");
    const datetime = document.getElementById("datetime");
    const quote = document.getElementById("quote");
    const autosaveStatus = document.getElementById("autosaveStatus");
    const darkToggle = document.getElementById("darkToggle");

    const quotes = [
      "Believe in yourself and all that you are.",
      "Start where you are. Use what you have. Do what you can.",
      "Push yourself, because no one else is going to do it for you.",
      "You’re capable of amazing things.",
      "Success doesn't come from what you do occasionally, it comes from what you do consistently.",
      "Work hard in silence. Let your success make the noise.",
      "Don’t watch the clock; do what it does. Keep going."
    ];

    function animateQuote(text) {
      quote.textContent = "";
      let i = 0;
      const typing = setInterval(() => {
        if (i < text.length) {
          quote.textContent += text.charAt(i);
          i++;
        } else {
          clearInterval(typing);
        }
      }, 40);
    }

    function showQuote() {
      const random = Math.floor(Math.random() * quotes.length);
      animateQuote(quotes[random]);
    }

    function showDateTime() {
      const now = new Date();
      const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
      const formatted = now.toLocaleDateString(undefined, options);
      const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      datetime.textContent = `${formatted} — ${time}`;
    }

    function updateCounter() {
      const text = notepad.value.trim();
      const wordCount = text === "" ? 0 : text.split(/\s+/).length;
      const charCount = text.length;
      counter.textContent = `Words: ${wordCount} | Characters: ${charCount}`;
    }

    function showSavedStatus() {
      autosaveStatus.style.display = "block";
      autosaveStatus.style.opacity = 1;
      setTimeout(() => {
        autosaveStatus.style.opacity = 0;
        setTimeout(() => {
          autosaveStatus.style.display = "none";
        }, 300);
      }, 1000);
    }

    function copyText() {
      notepad.select();
      document.execCommand("copy");
      alert("Copied to clipboard!");
    }

    function clearText() {
      if (confirm("Are you sure you want to clear the note?")) {
        notepad.value = "";
        localStorage.removeItem("savedNote");
        updateCounter();
        showSavedStatus();
      }
    }

    function downloadText() {
      const blob = new Blob([notepad.value], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "note.txt";
      link.click();
    }

    window.onload = () => {
      const saved = localStorage.getItem("savedNote");
      if (saved) notepad.value = saved;
      updateCounter();
      showQuote();
      showDateTime();

      const savedMode = localStorage.getItem("darkMode");
      if (savedMode === "enabled") {
        document.body.classList.add("dark");
        darkToggle.checked = true;
      }
    };

    notepad.addEventListener("input", () => {
      localStorage.setItem("savedNote", notepad.value);
      updateCounter();
      showSavedStatus();
    });

    darkToggle.addEventListener("change", () => {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkMode", document.body.classList.contains("dark") ? "enabled" : "disabled");
    });
  </script>

</body>
</html>
